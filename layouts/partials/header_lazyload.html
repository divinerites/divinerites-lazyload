<!--
   Original idea : https://discourse.gohugo.io/t/responsive-lazy-loaded-images/26041
   lazyload : https://github.com/verlok/vanilla-lazyload
-->
{{- with site.Params.global.lazyload }}
   {{- if .enable }}
      {{- if .local }}
         {{- $js0 := resources.Get "js/intersection-observer.js" }}
         {{- $js1 := resources.Get "js/lazyload.min.js" }}
         {{- $js := slice $js0 $js1 | resources.Concat "js/concat_lazyload.js" | minify | fingerprint "sha384" }}
         <script src="{{ $js.RelPermalink }}" integrity="{{ $js.Data.Integrity }}"></script>
      {{- else }}
         <script src="https://cdn.jsdelivr.net/npm/intersection-observer@0.7.0/intersection-observer.js"></script>
         <script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@16.1.0/dist/lazyload.min.js"></script>
      {{- end }}
   {{- end }}
{{- end }}
